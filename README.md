# Проектная работа "Веб-ларек"

Стек: HTML, SCSS, TS, Webpack

Структура проекта:

- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

Важные файлы:

- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск

Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```

## Сборка

```
npm run build
```

или

```
yarn build
```

# Типы данных, используемые в приложении Web-Larek 2.0

Приложение построено с применением строго типизированных структур, обеспечивающих контроль за целостностью данных как на этапе разработки, так и во время работы. Ниже приведены основные интерфейсы и типы, применяемые в приложении.

---

## `ProductData`

Тип описывает сущность товара, отображаемого в каталоге или корзине.

**Поля:**

- `id: string` — Идентификатор товара, используется как ключ при всех операциях.
- `description: string` — Текстовое описание, дающее представление о товаре.
- `image: string` — Ссылка на изображение, отображаемое на карточке.
- `title: string` — Название товара.
- `category: string` — Категория или раздел, к которому принадлежит товар.
- `price: number | null` — Стоимость товара. Может быть `null`, если цена не указана.

---

## `ApiResponseList<Type>`

Универсальный тип ответа от API при получении списка элементов любого типа.

**Поля:**

- `total: number` — Общее число доступных элементов.
- `items: Type[]` — Сами элементы в виде массива.

---

## `BasketState`

Хранит состояние пользовательской корзины, включая товары, сумму и текущие выделения.

**Поля:**

- `items: ProductData[]` — Массив товаров, добавленных пользователем.
- `totalPrice: number` — Суммарная стоимость всех товаров.
- `selected: string[]` — Список ID выбранных товаров (например, для оформления заказа).

---

## `DeliveryInfo`

Содержит информацию о способе и адресе доставки заказа.

**Поля:**

- `address: string` — Адрес, указанный для доставки.
- `payment: string` — Метод оплаты (например, "card", "cash").

---

## `ContactInfo`

Контактные данные покупателя для связи и подтверждения заказа.

**Поля:**

- `phone: string` — Телефонный номер клиента.
- `email: string` — Адрес электронной почты.

---

## `OrderPayload`

Комбинирует все данные, необходимые для оформления заказа.

**Поля:**

- `address: string` — Адрес доставки.
- `payment: string` — Метод оплаты.
- `phone: string` — Телефон клиента.
- `email: string` — Email клиента.
- `total: number` — Итоговая стоимость заказа.
- `items: string[]` — Список идентификаторов заказанных товаров.

---

## `OrderResponse`

Структура ответа от сервера при успешном создании заказа.

**Поля:**

- `id: string` — Номер созданного заказа.
- `total: number` — Итоговая сумма, зафиксированная сервером.

---

## `OrderFormErrors`

Описывает возможные ошибки, возникающие при валидации полей формы заказа.

**Тип:**

- `Partial<Record<keyof OrderPayload, string>>` — Каждому полю формы может соответствовать текст ошибки. Если ошибки нет — поле отсутствует.

---

## `SuccessResponse`

Ответ от сервера при успешной операции (например, подтверждение заказа).

**Поля:**

- `total: number` — Подтвержденная сумма заказа.

---

## `CardEventHandlers`

Тип описывает функции, обрабатывающие действия с карточкой товара.

**Поля:**

- `onClick?: (event: MouseEvent) => void` — Обработка клика по карточке.
- `onAddToBasket?: (item: ProductData) => void` — Добавление товара в корзину.
- `onRemoveFromBasket?: (item: ProductData) => void` — Удаление товара из корзины.

---

# Дополнительные интерфейсы и типы данных

Этот раздел содержит расширенный набор типов, используемых в различных частях проекта — от визуальных компонентов до логики оформления заказа. Благодаря типизации обеспечивается предсказуемость поведения и минимизируются ошибки при разработке.

---

## `ProductData`

Базовый интерфейс, описывающий сущность товара, присутствующего в системе.

**Поля:**

- `id: string` — Идентификатор товара, уникальный в пределах всей системы.
- `description: string` — Подробное описание товара.
- `image: string` — Ссылка на изображение товара (используется в карточке).
- `title: string` — Название, отображаемое в интерфейсе.
- `category: string` — Категория, к которой принадлежит товар.
- `price: number | null` — Стоимость товара. Может быть `null`, если цена скрыта или ещё не определена.

---

## `ApiResponseList<Type>`

Тип, описывающий формат ответа от сервера при получении списка сущностей.

**Поля:**

- `total: number` — Общее число элементов в базе данных.
- `items: Type[]` — Список элементов, соответствующих запросу.

---

## `BasketState`

Отражает текущее состояние корзины с визуальной привязкой к DOM.

**Поля:**

- `items: HTMLElement[]` — DOM-элементы карточек товаров, добавленных в корзину.
- `price: number` — Общая сумма текущих товаров.
- `selected: string[]` — Массив ID товаров, которые пользователь отметил (например, для оформления).

---

## `DeliveryInfo`

Интерфейс, определяющий данные, связанные с адресом и способом доставки.

**Поля:**

- `address: string` — Указанный пользователем адрес доставки.
- `payment: string` — Метод оплаты: карта, наличные, онлайн и т.д.

---

## `ContactInfo`

Содержит контактные сведения пользователя, необходимые для обратной связи и подтверждений.

**Поля:**

- `phone: string` — Телефонный номер клиента.
- `email: string` — Адрес электронной почты, на который могут приходить уведомления.

---

## `OrderPayload`

Объединяет информацию о доставке, контактах и содержимом заказа.

**Поля:**

- `address: string` — Адрес, куда будет доставлен заказ.
- `payment: string` — Способ оплаты.
- `phone: string` — Телефон заказчика.
- `email: string` — Email для связи.
- `total: number` — Финальная сумма заказа.
- `items: string[]` — Массив ID товаров, включённых в заказ.

---

## `OrderResponse`

Тип, описывающий успешный ответ от сервера после размещения заказа.

**Поля:**

- `id: string` — Уникальный номер заказа, сгенерированный сервером.
- `total: number` — Подтверждённая сумма заказа.

---

## `OrderFormErrors`

Тип, описывающий ошибки, возникшие при заполнении полей формы оформления заказа.

**Тип:**

- `Partial<Record<keyof OrderPayload, string>>` — Мапа, где каждому полю формы может соответствовать сообщение об ошибке.

---

## `SuccessResponse`

Простой тип ответа от сервера при выполнении действия без ошибок.

**Поля:**

- `total: number` — Сумма, подтверждённая в процессе выполнения действия (например, при расчёте корзины).

---

## `CardEventHandlers`

Определяет функции-обработчики для взаимодействия с карточкой товара в UI.

**Поля:**

- `onClick?: (event: MouseEvent) => void` — Обработчик клика по карточке.
- `onAddToBasket?: (item: ProductData) => void` — Добавление товара в корзину.
- `onRemoveFromBasket?: (item: ProductData) => void` — Удаление товара из корзины.

---

> Эти интерфейсы обеспечивают связь между логикой приложения и визуальными компонентами, обеспечивая чёткую структуру и предсказуемое поведение на всех уровнях взаимодействия.

# Архитектура приложения

Проект **Web-Larek 2.0** построен на архитектурном шаблоне **Model–View–Presenter (MVP)**, который обеспечивает прозрачное разделение обязанностей между логикой, интерфейсом и обработкой взаимодействий. Благодаря этой структуре приложение становится модульным, легко расширяемым и стабильным при доработках.

---

## 🔧 Основные уровни архитектуры

### 1. **Model** — Хранилище и обработчик данных

Этот слой отвечает за всё, что связано с внутренним состоянием приложения и бизнес-логикой:

- Управление данными корзины, каталога, заказов.
- Валидация информации при вводе и оформлении заказа.
- Получение и отправка данных через API.
- Генерация событий при изменении данных.

📌 Примеры:
- `AppState` — управляет всем внутренним состоянием приложения.
- `AppApi` — выполняет HTTP-запросы: получает список товаров, отправляет заказы.

---

### 2. **View** — Пользовательский интерфейс и визуализация

Слой представления отображает данные пользователю и обновляется при изменениях. Он не содержит бизнес-логики, а только отвечает за отображение информации и взаимодействие с DOM:

- Рендеринг карточек, форм, модальных окон и каталога.
- Обработка пользовательских действий (клики, ввод данных).
- Отображение текущего состояния (например, количество товаров в корзине).

📌 Примеры:
- `Page` — управляет отрисовкой каталога, корзины, счётчика.
- `Modal` — модальное окно с динамическим содержимым.
- `Card` — отдельная карточка товара.

---

### 3. **Presenter** — Координация и логика взаимодействий

Presenter — это мозг, координирующий работу между Model и View:

- Слушает события интерфейса и реагирует на действия пользователя.
- Изменяет состояние в Model.
- Обновляет View в ответ на изменения данных.
- Организует поток событий и логики приложения.

📌 Примеры:
- `App` — основной управляющий класс, который инициирует загрузку данных, следит за состоянием и координирует работу компонентов.
- `EventEmitter` — механизм подписки и оповещения компонентов об изменениях.

---

## 🌟 Почему выбрана архитектура MVP?

Применение паттерна **Model–View–Presenter** даёт множество преимуществ при разработке клиентских приложений:

### ✅ Чёткое разделение обязанностей
Каждый слой отвечает строго за свою зону:
- Model управляет данными,
- View отвечает за интерфейс,
- Presenter связывает их между собой.

### ✅ Упрощённое масштабирование
Добавление нового функционала (например, фильтров, сортировки, оформления заказов) не требует переписывать существующие компоненты.

### ✅ Лёгкость тестирования
Бизнес-логика и управление состоянием вынесены в Model и Presenter, что делает возможным юнит-тестирование без зависимости от DOM.

### ✅ Повышенная устойчивость к изменениям
Поскольку View не зависит напрямую от Model, а все взаимодействия происходят через Presenter, изменение одного слоя минимально затрагивает остальные.

---

> Благодаря MVP архитектуре проект легко сопровождается, масштабируется и адаптируется под любые пользовательские сценарии.

# Полное описание классов проекта

В проекте Web-Larek 2.0 реализована чёткая структура классов по слоям архитектуры MVP. Ниже представлены ключевые классы, их цели и функциональность.

---

## 1. 🧠 Model — управление данными и логикой

### `AppState`

Класс, управляющий глобальным состоянием приложения. Хранит всё: от содержимого корзины до текущих ошибок при оформлении заказа.

**Конструктор:**
- `initialState: Partial<AppStateType>` — Начальные данные.
- `events: EventEmitter` — Система подписки на события.

**Поля:**
- `catalog: ProductData[]` — Список всех доступных товаров.
- `basket: string[]` — Массив ID товаров, добавленных в корзину.
- `order: OrderPayload` — Текущий заказ пользователя.
- `orderError: OrderFormErrors` — Ошибки при заполнении формы заказа.
- `preview: string | null` — ID товара для предпросмотра.

**Методы:**
- `addBasket(productId: string): void` — Добавляет товар по ID в корзину.
- `removeBasket(productId: string): void` — Удаляет товар из корзины.
- `clearBasket(): void` — Очищает всю корзину.
- `setCatalog(products: ProductData[]): void` — Загружает товары в состояние.
- `validateOrder(): boolean` — Проверка валидности заказа.
- `validateContact(): boolean` — Проверка корректности контактов.

---

### `AppApi`

Класс-интерфейс между клиентом и сервером: отвечает за загрузку данных и отправку заказов.

**Конструктор:**
- `contentDeliveryUrl: string` — Ссылка для получения изображений/данных.
- `apiBaseUrl: string` — Базовый API-адрес.
- `config?: RequestInit` — Настройки по умолчанию для запросов.

**Методы:**
- `fetchProductList(): Promise<ProductData[]>` — Получает весь каталог товаров.
- `processOrderSubmission(payload: OrderPayload): Promise<OrderResponse>` — Отправляет заказ на сервер.

---

## 2. 🖼️ View — визуальный интерфейс и взаимодействие с пользователем

### `Page`

Управляет структурой главной страницы, включая каталог и корзину. Обновляет интерфейс в зависимости от действий пользователя.

**Конструктор:**
- `container: HTMLElement` — Родительский контейнер.
- `events: EventEmitter` — Связь с остальными компонентами.

**Поля:**
- `counterElement: HTMLElement` — Счётчик количества товаров в корзине.
- `catalogElement: HTMLElement` — Контейнер каталога.
- `lockWrapper: HTMLElement` — Блокировка страницы на время загрузки.

**Методы:**
- `setCounter(value: number): void` — Обновляет счётчик.
- `updateCatalog(items: HTMLElement[]): void` — Рендерит каталог.
- `toggleLock(state: boolean): void` — Блокирует/разблокирует интерфейс.

---

### `Modal`

Компонент управления модальными окнами, включая отображение, закрытие и вставку контента.

**Конструктор:**
- `containerElement: HTMLElement`
- `events: EventEmitter`

**Методы:**
- `openModal(): void` — Открывает окно.
- `closeModal(): void` — Закрывает окно.
- `setContent(content: HTMLElement): void` — Вставляет HTML-содержимое в модалку.

---

### `Card`

Отдельная карточка товара, используемая как в каталоге, так и в корзине. Реагирует на пользовательские действия.

**Конструктор:**
- `containerElement: HTMLElement`
- `product: ProductData`
- `actionHandlers: CardEventHandlers`

**Методы:**
- `setTitle(value: string): void` — Обновляет заголовок.
- `setImage(src: string): void` — Устанавливает изображение.
- `setPrice(value: number): void` — Отображает цену.
- `toggleButtonState(isInBasket: boolean): void` — Меняет поведение кнопки (добавить/удалить).

---

### `Basket`

Компонент, отображающий текущие товары в корзине и управляющий её состоянием.

**Конструктор:**
- `container: HTMLElement`
- `events: EventEmitter`

**Методы:**
- `updateItems(items: HTMLElement[]): void` — Заменяет содержимое корзины.
- `updateTotal(price: number): void` — Показывает общую стоимость.

---

### `Order`

Работает с формой оформления заказа: получение данных, валидация и визуальная обратная связь.

**Конструктор:**
- `container: HTMLFormElement`
- `events: EventEmitter`

**Методы:**
- `setPaymentMethod(method: string): void` — Устанавливает выбранный способ оплаты.
- `validateFields(): boolean` — Проверяет форму на заполненность и корректность.

---

### `Contact`

Компонент для ввода контактных данных клиента.

**Конструктор:**
- `container: HTMLFormElement`
- `events: EventEmitter`

**Методы:**
- `setPhone(value: string): void`
- `setEmail(value: string): void`
- `validateFields(): boolean` — Проверка корректности введённых данных.

---

## 3. 🧩 Presenter — логика приложения и координация компонентов

### `App`

Главный класс, координирующий работу всего приложения. Загружает данные, слушает события, управляет визуальными обновлениями и передаёт данные между слоями.

**Поля:**
- `api: AppApi`
- `events: EventEmitter`
- `page: Page`
- `modal: Modal`
- `appData: AppState`

**Методы:**
- `initialize(): void` — Запускает всё приложение.
- `setupEventHandlers(): void` — Подписывает все события.
- `fetchProductData(): void` — Загружает каталог.
- `refreshCatalog(): void` — Обновляет список товаров.
- `refreshBasketView(): void` — Обновляет корзину.

---

### `EventEmitter`

Служебный класс для работы с подписками и событиями. Позволяет компонентам взаимодействовать, не зная друг о друге напрямую.

**Поля:**
- `_events: Map<EventName, Set<Subscriber>>` — Хранение событий и их слушателей.

**Методы:**
- `on(event, callback): void` — Подписка на событие.
- `emit(event, data?): void` — Вызов события.
- `off(event, callback): void` — Удаление конкретного подписчика.
- `onAll(callback): void` — Отслеживание всех событий.
- `offAll(): void` — Удаление всех подписчиков.

---

## 🔍 Быстрый обзор по слоям

| Слой      | Классы                                                |
|-----------|--------------------------------------------------------|
| Model     | `AppState`, `AppApi`                                   |
| View      | `Page`, `Modal`, `Card`, `Basket`, `Order`, `Contact` |
| Presenter | `App`, `EventEmitter`                                  |

---

> Такое разделение классов обеспечивает масштабируемость, тестируемость и поддержку в реальных условиях разработки. Каждый класс выполняет строго ограниченную и предсказуемую функцию.

# 🔧 Базовый код: системные классы и фундамент приложения

Ниже представлены ключевые строительные блоки проекта Web-Larek 2.0 — от универсальных классов для HTTP-запросов и событий до абстракций, на которых строятся интерфейсные и логические компоненты.

---

## `class Api`

Класс-обёртка над `fetch`, упрощающий работу с сетевыми запросами. Используется для общения с сервером по REST-принципам.

### Конструктор:

- `baseUrl: string` — Корень всех API-запросов.
- `options: RequestInit` — Общие настройки (заголовки, методы, и т.д.).

### Методы:

- `get(uri: string): Promise<object>` — Выполняет GET-запрос по заданному пути.
- `post(uri: string, data: object, method: ApiPostMethods = 'POST'): Promise<object>` — Отправляет данные методом POST (или другим при необходимости).
- `handleResponse(response: Response): Promise<object>` — Обрабатывает ответ сервера и выбрасывает ошибку, если статус неуспешный.

---

## `class EventEmitter`

Класс-событийник, реализующий паттерн "наблюдатель". Позволяет подписываться и реагировать на события по всему приложению.

### Методы:

- `on(event: EventName, callback: (data: T) => void): void` — Добавляет обработчик на событие.
- `emit(event: string, data?: T): void` — Запускает событие.
- `off(eventName: EventName, callback: Subscriber): void` — Удаляет конкретный обработчик.
- `onAll(callback: (event: EmitterEvent) => void): void` — Ловит все события.
- `offAll(): void` — Очищает все подписки.

---

## `abstract class Component`

Базовый класс для визуальных компонентов. Предоставляет методы для управления DOM.

### Конструктор:

- `container: HTMLElement` — Основной DOM-элемент компонента.

### Методы:

- `toggleClass(element: HTMLElement, className: string, force?: boolean): void` — Добавляет/удаляет класс у элемента.
- `setText(element: HTMLElement, value: unknown): void` — Устанавливает текст внутри элемента.
- `render(data?: Partial<T>): HTMLElement` — Обновляет состояние и возвращает DOM-узел.

---

## `abstract class Model`

Основа для всех моделей данных. Реализует управление состоянием с отслеживанием изменений.

### Конструктор:

- `data: Partial<T>` — Начальное состояние.
- `events: EventEmitter` — Объект для рассылки изменений.

### Методы:

- `emitChanges(event: string, payload?: Partial<T>): void` — Сообщает об изменениях в состоянии.
- `getState(): Partial<T>` — Возвращает текущее состояние модели.
- `setState(updates: Partial<T>, event?: string): void` — Применяет изменения и вызывает событие.

---

# ⚙️ Основные компоненты интерфейса

## 🧩 Интерфейсные компоненты приложения

Ниже описаны ключевые классы, отвечающие за отображение и поведение пользовательского интерфейса. Каждый из них инкапсулирует свою зону ответственности — от карточек товаров до формы заказа.

---

### `App`

Центральный управляющий класс приложения. Отвечает за инициализацию, загрузку данных и связку между всеми остальными компонентами.

**Поля:**
- `api: AppApi` — Интерфейс для общения с сервером.
- `events: EventEmitter` — Глобальный событийный центр.
- `page: Page` — Управление структурой главной страницы (каталог, корзина).
- `modal: Modal` — Компонент всплывающих окон.
- `appData: AppState` — Хранилище текущего состояния приложения.

**Методы:**
- `initialize()` — Старт приложения: подписка на события и загрузка данных.
- `setupEventHandlers()` — Привязка логики к событиям UI.
- `fetchProductData()` — Получение данных каталога с сервера.
- `refreshCatalog()` — Перерисовка карточек товаров.
- `refreshBasketView()` — Синхронизация UI-корзины с её состоянием.

---

### `Page`

Компонент, управляющий структурой главного экрана: каталогом, счётчиком товаров и блокировкой интерфейса при необходимости.

**Поля:**
- `counter: number` — Количество товаров в корзине.
- `catalog: HTMLElement[]` — DOM-элементы карточек.
- `locked: boolean` — Флаг блокировки страницы при загрузках или ошибках.

---

### `Modal`

Универсальный компонент для отображения всплывающих окон.

**Методы:**
- `openModal()` — Открывает модальное окно.
- `closeModal()` — Закрывает окно.
- `renderModal(data: IModalData): HTMLElement` — Генерирует содержимое модального окна на основе переданных данных.

---

### `Card`

Класс представляет карточку отдельного товара с полями, изображением и возможностью добавления в корзину.

**Поля:**
- `id: string` — Уникальный идентификатор товара.
- `title: string` — Название.
- `description: string` — Подробности.
- `price: number | null` — Стоимость (может быть `null`).
- `category: string` — Категория, к которой относится товар.

**Методы:**
- `updateButtonState(isInBasket: boolean)` — Меняет внешний вид и поведение кнопки (например, "В корзину" / "Удалить").

---

### `Basket`

Компонент, отвечающий за визуализацию текущей корзины покупок и отображение общей суммы.

**Поля:**
- `items: HTMLElement[]` — DOM-элементы добавленных товаров.
- `price: number` — Итоговая стоимость всех товаров.

**Методы:**
- `render(data: Partial<BasketState>): HTMLElement` — Генерация и отображение актуального состояния корзины.
- `updateBasketCounter()` — Пересчёт и обновление количества товаров.

---

### `Order`

Отвечает за отображение формы оформления заказа, валидацию и вывод ошибок.

**Методы:**
- `updateErrors(errors: Partial<OrderPayload>)` — Подсвечивает и отображает ошибки в форме.
- `render(data: Partial<OrderPayload>): HTMLFormElement` — Формирует HTML-разметку формы на основе данных.

---

### `Contact`

Компонент формы ввода контактных данных пользователя (телефон и email).

**Методы:**
- `updateErrors(errors: Partial<ContactInfo>)` — Показывает ошибки в соответствующих полях формы.
- `render(data: Partial<ContactInfo>): HTMLFormElement` — Генерирует поля ввода с текущими данными.

---


Форма контактной информации клиента.

**Методы:**
- `updateErrors(errors: Partial<ContactInfo>)` — Показывает ошибки.
- `render(data: Partial<ContactInfo>): HTMLFormElement` — Генерация формы контактов.

---

# 🧱 Структура компонентов по паттерну Model–View–Presenter (MVP)

В основе Web-Larek 2.0 лежит архитектурный шаблон **MVP**, который разделяет обязанности между слоями:

- `Model` — хранение и обработка данных,
- `View` — отображение и взаимодействие с пользователем,
- `Presenter` — логика, координирующая поведение приложения.

---

## 📦 Model — модель данных и логики

### `class AppStateModel`

Главное хранилище состояния приложения. Управляет всеми изменениями данных и их валидацией.

**Поля:**
- `catalog: ProductModel[]` — Список доступных товаров.
- `basket: string[]` — Массив ID товаров в корзине.
- `order: IOrderDetails` — Текущий заказ, включая адрес, оплату и контакты.
- `formErrors: IOrderFormErrors` — Ошибки, возникшие при валидации полей заказа.
- `preview: string | null` — ID товара для предпросмотра.

**Методы:**
- `addToBasket(productId: string): void` — Добавляет товар по ID в корзину.
- `removeFromBasket(productId: string): void` — Удаляет товар из корзины.
- `clearBasket(): void` — Полная очистка корзины.
- `setCatalog(products: ProductModel[]): void` — Загружает каталог товаров.
- `getBasketProducts(): ProductModel[]` — Возвращает объекты товаров, находящихся в корзине.
- `validateOrder(): boolean` — Проверяет, заполнены ли данные заказа корректно.
- `validateContactForm(): boolean` — Проверяет корректность контактных данных.
- `setOrderField(field: keyof IOrderDetails, value: string): void` — Обновляет значение одного поля заказа.

---

## 🖼️ View — визуальное представление и взаимодействие

### `class PageComponent`

Управляет главной страницей: каталогом, счётчиком товаров, блокировкой интерфейса при загрузках.

**Поля:**
- `counterElement: HTMLElement` — Отображает количество товаров в корзине.
- `catalogElement: HTMLElement` — Контейнер карточек товаров.
- `lockWrapper: HTMLElement` — Элемент, перекрывающий интерфейс при блокировке.

**Методы:**
- `setCounter(value: number): void` — Обновляет значение счётчика.
- `updateCatalog(items: HTMLElement[]): void` — Рендерит карточки товаров.
- `toggleLock(state: boolean): void` — Включает или отключает блокировку интерфейса.

---

### `class ProductCardComponent`

Компонент визуализации отдельной карточки товара.

**Поля:**
- `titleElement: HTMLElement` — Название товара.
- `imageElement: HTMLImageElement` — Изображение товара.
- `priceElement: HTMLElement` — Цена товара.
- `actionButton: HTMLButtonElement` — Кнопка взаимодействия (добавить/удалить из корзины).

**Методы:**
- `setTitle(value: string): void` — Устанавливает название.
- `setImage(src: string): void` — Устанавливает путь к изображению.
- `setPrice(value: number): void` — Отображает цену.
- `toggleButtonState(isInBasket: boolean): void` — Изменяет внешний вид кнопки в зависимости от состояния.

---

### `class BasketComponent`

Отвечает за отображение содержимого корзины и общей стоимости заказа.

**Поля:**
- `itemList: HTMLElement` — Список DOM-элементов товаров.
- `totalPriceElement: HTMLElement` — Отображение итоговой суммы.
- `orderButton: HTMLButtonElement` — Кнопка перехода к оформлению.

**Методы:**
- `updateItems(items: HTMLElement[]): void` — Обновляет список товаров в корзине.
- `updateTotal(price: number): void` — Отображает сумму всех товаров.

---

### `class ModalComponent`

Модальное окно для отображения дополнительной информации (предпросмотр товара, формы и т.п.).

**Поля:**
- `closeButton: HTMLButtonElement` — Кнопка закрытия.
- `contentElement: HTMLElement` — Контейнер для содержимого.

**Методы:**
- `open(): void` — Показывает окно.
- `close(): void` — Скрывает окно.
- `setContent(content: HTMLElement): void` — Вставляет HTML-элемент в тело окна.

---

### `class OrderFormComponent`

Форма для ввода адреса доставки и выбора способа оплаты.

**Поля:**
- `paymentButtons: HTMLButtonElement[]` — Кнопки выбора оплаты.
- `addressInput: HTMLInputElement` — Поле для адреса.

**Методы:**
- `setPaymentMethod(method: string): void` — Сохраняет выбранный способ.
- `validateFields(): boolean` — Проверяет корректность заполнения полей.

---

## ⚙️ Presenter — логика и координация

Презентер не отображает данные напрямую и не хранит их, а управляет их потоком между Model и View.

Вся логика сконцентрирована в основном классе приложения — `App`.

**Задачи:**
- Инициализация компонентов при запуске.
- Получение данных с сервера и передача их в `AppStateModel`.
- Реакция на пользовательские действия:
  - Добавление/удаление товаров в корзину.
  - Открытие модальных окон.
  - Отправка заказов и контактной информации.

Презентер подписывается на события и обновляет представление, основываясь на изменениях в модели.

---

> Такая структура делает проект предсказуемым, поддерживаемым и легко масштабируемым. Каждый компонент выполняет свою чётко определённую роль, а взаимодействие между ними происходит через события.


## Модель (Model)

### `class AppStateModel`

Класс `AppStateModel` управляет глобальным состоянием приложения, включая каталог, корзину и заказы.

- **Поля:**

  - `catalog: ProductModel[]` — Список товаров в каталоге.
  - `basket: string[]` — Идентификаторы товаров в корзине.
  - `order: IOrderDetails` — Информация о текущем заказе.
  - `formErrors: IOrderFormErrors` — Ошибки валидации формы.
  - `preview: string | null` — Идентификатор товара для предварительного просмотра.

- **Методы:**
  - `addToBasket(productId: string): void` — Добавляет товар в корзину.
  - `removeFromBasket(productId: string): void` — Удаляет товар из корзины.
  - `clearBasket(): void` — Очищает корзину.
  - `setCatalog(products: ProductModel[]): void` — Устанавливает список товаров.
  - `getBasketProducts(): ProductModel[]` — Возвращает товары из корзины.
  - `validateOrder(): boolean` — Проверяет валидность заказа.
  - `validateContactForm(): boolean` — Проверяет валидность формы контактов.
  - `setOrderField(field: keyof IOrderDetails, value: string): void` — Обновляет поле заказа.

---

## Представление (View)

### `class PageComponent`

Компонент `PageComponent` управляет отображением основных элементов интерфейса.

- **Поля:**

  - `counterElement: HTMLElement` — Счётчик товаров в корзине.
  - `catalogElement: HTMLElement` — Элемент для отображения каталога.
  - `lockWrapper: HTMLElement` — Элемент для блокировки интерфейса.

- **Методы:**
  - `setCounter(value: number): void` — Обновляет счётчик товаров.
  - `updateCatalog(items: HTMLElement[]): void` — Обновляет список товаров в каталоге.
  - `toggleLock(state: boolean): void` — Блокирует или разблокирует интерфейс.

---

### `class ProductCardComponent`

Компонент `ProductCardComponent` представляет карточку товара.

- **Поля:**

  - `titleElement: HTMLElement` — Название товара.
  - `imageElement: HTMLImageElement` — Изображение товара.
  - `priceElement: HTMLElement` — Цена товара.
  - `actionButton: HTMLButtonElement` — Кнопка для взаимодействия с товаром.

- **Методы:**
  - `setTitle(value: string): void` — Устанавливает название товара.
  - `setImage(src: string): void` — Устанавливает изображение товара.
  - `setPrice(value: number): void` — Устанавливает цену товара.
  - `toggleButtonState(isInBasket: boolean): void` — Обновляет состояние кнопки.

---

### `class BasketComponent`

Компонент `BasketComponent` управляет корзиной покупок.

- **Поля:**

  - `itemList: HTMLElement` — Список товаров в корзине.
  - `totalPriceElement: HTMLElement` — Общая стоимость товаров.
  - `orderButton: HTMLButtonElement` — Кнопка оформления заказа.

- **Методы:**
  - `updateItems(items: HTMLElement[]): void` — Обновляет список товаров.
  - `updateTotal(price: number): void` — Обновляет общую стоимость товаров.

---

### `class ModalComponent`

Компонент `ModalComponent` отвечает за управление модальными окнами.

- **Поля:**

  - `closeButton: HTMLButtonElement` — Кнопка закрытия окна.
  - `contentElement: HTMLElement` — Контент модального окна.

- **Методы:**
  - `open(): void` — Открывает модальное окно.
  - `close(): void` — Закрывает модальное окно.
  - `setContent(content: HTMLElement): void` — Устанавливает содержимое окна.

---

### `class OrderFormComponent`

Компонент `OrderFormComponent` управляет формой оформления заказа.

- **Поля:**

  - `paymentButtons: HTMLButtonElement[]` — Кнопки выбора способа оплаты.
  - `addressInput: HTMLInputElement` — Поле для ввода адреса.

- **Методы:**
  - `setPaymentMethod(method: string): void` — Устанавливает способ оплаты.
  - `validateFields(): boolean` — Проверяет корректность данных формы.

---

## Презентер (Presenter)

Презентер управляет связью между моделью и представлением. Основные задачи выполняются в классе `App`:

- **Инициализация приложения.**
- **Загрузка данных каталога.**
- **Обработка пользовательских действий:**
  - Добавление/удаление товаров из корзины.
  - Открытие модальных окон.
  - Отправка заказа.

---